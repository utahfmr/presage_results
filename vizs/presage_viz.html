<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta name="generator" content="Madoko, version 1.0.2" />
  <meta name="viewport" content="initial-scale=1.0" />
  <title>PRESAGE Demo</title>
  <style type="text/css"  class="link">
  /*# sourceURL=madoko.css */
  
  .madoko .toc>.tocblock .tocblock .tocblock {
    margin-left: 2.25em;
  }
  .madoko .toc>.tocblock .tocblock {
    margin-left: 1.5em;
  }
  .madoko .toc-contents>.tocblock>.tocitem {
    font-weight: bold;
  }
  .madoko .toc {
    margin-top: 1em;
  }
  .madoko p.para-continue {
    margin-bottom: 0pt;
  }
  .madoko .para-block+p {
    margin-top: 0pt;
  }
  .madoko ul.para-block, .madoko ol.para-block {
    margin-top: 0pt;
    margin-bottom: 0pt;
  }
  .madoko ul.para-end, .madoko ol.para-end {
    margin-bottom: 1em;
  }
  .madoko dl {
    margin-left: 0em;
  }
  .madoko blockquote {
    font-style: italic;
  }
  .madoko a.localref {
    text-decoration: none;
  }
  .madoko a.localref:hover {
    text-decoration: underline;
  }
  .madoko .footnotes {
    font-size: smaller;
    margin-top: 2em;
  }
  .madoko .footnotes hr {
    width: 50%;
    text-align: left;
  }
  .madoko .footnote { 
    margin-left: 1em;
  }
  .madoko .footnote-before {
    margin-left: -1em;
    width: 1em;
    display: inline-block;
  }
  .madoko .align-center, .madoko .align-center>p {
    text-align: center !important;
  }
  .madoko .align-center pre {
    text-align: left;
  }
  .madoko .align-center>* {
    margin-left: auto !important;
    margin-right: auto !important;
  }
  .madoko .align-left, .madoko .align-left>p {
    text-align: left !important;
  }
  .madoko .align-left>* {
    margin-left: 0pt !important;
    margin-right: auto !important;
  }
  .madoko .align-right, .madoko .align-right>p {
    text-align: right !important;
  }
  .madoko .align-right>* {
    margin-left: auto !important;
    margin-right: 0pt !important;
  }
  .madoko .align-center>table,
  .madoko .align-left>table,
  .madoko .align-right>table {
    text-align: left !important;
  }
  .madoko .equation-before {
    float: right;
  }
  .madoko .bibitem {
    font-size: smaller;
  }
  .madoko .bibsearch {
    font-size: x-small;
    text-decoration:none;
    color: black;
    font-family: "Segoe UI Symbol", Symbola, serif;
  }
  .madoko .block, .madoko .figure, .madoko .bibitem, .madoko .equation, .madoko div.math {
    margin-top: 1ex;
    margin-bottom: 1ex;
  }
  .madoko .figure {
    padding: 0.5em;
    margin-left: 0pt;
    margin-right: 0pt;
  }
  .madoko .hidden {
    display: none;
  }
  .madoko .invisible {
    visibility: hidden;
  }
  .madoko.preview .invisible {
    visibility: visible;
    opacity: 0.5;
  }
  .madoko code.code, .madoko span.code {
    white-space: pre-wrap;
  }
  .madoko hr, hr.madoko {
    border: none;
    border-bottom: black solid 1px;
    margin-bottom: 0.5ex;
  }
  .madoko .framed>*:first-child {
    margin-top: 0pt;
  }
  .madoko .framed>*:last-child {
    margin-bottom: 0pt;
  }
  .madoko ul.list-style-type-dash {
      list-style-type: none !important;
  }
  .madoko ul.list-style-type-dash > li:before {
      content: "\2013"; 
      position: absolute;
      margin-left: -1em; 
  }
  .madoko table.madoko {
    border-collapse: collapse;
  }
  .madoko td, .madoko th {
    padding: 0ex 0.5ex;
    margin: 0pt;
    vertical-align: top;
  }
  .madoko .cell-border-left {
    border-left: 1px solid black;
  }
  .madoko .cell-border-right {
    border-right: 1px solid black;
  }
  .madoko thead>tr:first-child>.cell-line,
  .madoko tbody:first-child>tr:first-child>.cell-line {
    border-top: 1px solid black;
    border-bottom: none;
  }
  .madoko .cell-line, .madoko .cell-double-line {
    border-bottom: 1px solid black;
    border-top: none;
  }
  .madoko .cell-double-line {
    border-top: 1px solid black;
    padding-top: 1.5px !important;
  }
  .madoko .input-mathpre .MathJax_Display {
    text-align: left !important;
  }
  .madoko div.input-mathpre {
    text-align: left;
    margin-top: 1.5ex;
    margin-bottom: 1ex;
  }
  .madoko .math-rendering {
    color: gray;
  }
  .madoko .mathdisplay {
    text-align: center;
  }
  .madoko .pretty table {
    border-collapse: collapse;
  }
  .madoko .pretty td {
    padding: 0em;
  }
  .madoko .pretty td.empty {
    min-width: 1.5ex;
  }
  .madoko .pretty td.expander {
    width: 100em;
  }
  body.madoko, .madoko .serif {
    font-family: Cambria,"Times New Roman","Liberation Serif","Times",serif;
  }
  .madoko .sans-serif {
    font-family: "Calibri", "Optima", sans-serif;
  }
  .madoko .symbol {
    font-family: "Segoe UI Symbol", Symbola, serif;
  }
  body.madoko {  
    -webkit-text-size-adjust: 100%;       
    text-rendering: optimizeLegibility;
  }
  body.madoko {
    max-width: 88ex; 
    margin: 1em auto;
    padding: 0em 2em;  
  }
  body.preview.madoko {
    padding: 0em 1em;
  }
  .madoko p {
    text-align: justify;
  }
  .madoko h1, .madoko h2, .madoko h3, .madoko h4 { 
    margin-top: 1.22em; 
    margin-bottom: 1ex;
  }
  .madoko h1+p, .madoko h2+p, .madoko h3+p, .madoko h4+p, .madoko h5+p  { 
    margin-top: 1ex;    
  }
  .madoko h5, .madoko h6 { 
    margin-top: 1ex;
    font-size: 1em;
  }
  .madoko h5 { 
    margin-bottom: 0.5ex;
  }
  .madoko h5 + p {
    margin-top: 0.5ex;
  }
  .madoko h6 { 
    margin-bottom: 0pt;
  }
  .madoko h6 + p {
    margin-top: 0pt;
  }
  .madoko pre, .madoko code, .madoko kbd, .madoko samp, .madoko tt, 
  .madoko .monospace, .madoko .token-indent, .madoko .reveal pre, .madoko .reveal code, .madoko .email {
    font-family: Consolas,"Andale Mono WT","Andale Mono",Lucida Console,Monaco,monospace,monospace;
    font-size: 0.85em;
  }
  .madoko pre code, .madoko .token-indent {
    font-size: 0.95em;
  }
  .madoko pre code {
    font-family: inherit !important;
  }
  .madoko ol.linenums li {
    background-color: white;
    list-style-type: decimal;
  }
  .madoko .remote {
    background-color: #F0FFF0;
  }
  .madoko .remote + * {
    margin-top: 0pt;
  }
  @media print {
    body.madoko {
      font-size: 10pt;
    }
    @page {
      margin: 1in 1.5in;
    }
  }
  @media only screen and (max-device-width:1024px) {
    body.madoko {
      padding: 0em 0.5em;    
    }
    .madoko li {
      text-align: left;
    }
  }
  
    </style>
  
  </head>
<body class="madoko">

<div class="body madoko" style="line-adjust:0">
<style>
    body.madoko {
      max-width: 75pc;       
    }   
</style>




<div class="titleblock align-center para-block" style="text-align:center;line-adjust:0">
<div class="titleheader align-center" style="text-align:center;line-adjust:0">
<div class="title para-block" style="font-size:xx-large;font-weight:bold;margin-bottom:0.5ex;line-adjust:0">PRESAGE Demo</div></div></div><h2 id="sec-overview" class="h1" data-heading-depth="1" style="display:block"><span class="heading-before"><span class="heading-label">1</span>.&#8194;</span>Overview</h2>
<p class="p noindent"><a href="http://arxiv.org/abs/1606.08948">PRESAGE</a> (available on&nbsp;<a href="https://utahfmr.github.io/PRESAGE/">Github</a>) 
is aimed at protecting structured address computations (SACs) against soft error induced bit-flips, and 
is developed using&nbsp;<a href="http://llvm.org/">LLVM</a> compiler infrastructure. The underlying principle of PRESAGE is that maximizing 
the flow of error helps in better error detection coverage at lower overhead. PRESAGE achieves it by 
introducing dependency chains between instructions used for SACs at LLVM IR level.We demonstrate the efficacy of 
PRESAGE by applying it on a publicly available implementation of Alternating Direction Implicit (ADI) kernel provided in 
<a href="http://web.cse.ohio-state.edu/~pouchet/software/polybench/">PolyBench/C benchmark suite</a>. 
The ADI kernel is used in simulations of physical problems such as heat conduction, diffusion equation, 
etc.
</p><h2 id="sec-adi-c-implementation" class="h1" data-heading-depth="1" style="display:block"><span class="heading-before"><span class="heading-label">2</span>.&#8194;</span>ADI C Implementation</h2><h3 id="sec-adi-kernel" class="h2" data-heading-depth="2" style="display:block"><span class="heading-before"><span class="heading-label">2.1</span>.&#8194;</span>ADI Kernel</h3>
<pre class="para-block pre-fenced pre-fenced3 language-javascript lang-javascript javascript colorized" style="display:block"><code> <span style="color:blue">for</span> (t=<span class="constant" style="color:purple">1</span>; t&lt;=tsteps; t++) {
    <span style="color:darkgreen">//Column Sweep</span>
    <span style="color:blue">for</span> (i=<span class="constant" style="color:purple">1</span>; i&lt;n-<span class="constant" style="color:purple">1</span>; i++) {
      v[i] = <span class="constant" style="color:purple">1.0</span>;
      p[i*n] = <span class="constant" style="color:purple">0.0</span>;
      q[i*n] = v[i];
      <span style="color:blue">for</span> (j=<span class="constant" style="color:purple">1</span>; j&lt;n-<span class="constant" style="color:purple">1</span>; j++) {
        p[i*n+j] = -c / (a*p[i*n+(j-<span class="constant" style="color:purple">1</span>)]+b);
        q[i*n+j] = ( -d*u[j*n+(i-<span class="constant" style="color:purple">1</span>)]+(<span class="constant" style="color:purple">1.0</span>+<span class="constant" style="color:purple">2.0</span>*d)*u[j*n+i] - 
                     f*u[j*n+(i+<span class="constant" style="color:purple">1</span>)]
                     -a*q[i*n+(j-<span class="constant" style="color:purple">1</span>)])/(a*p[i*n+(j-<span class="constant" style="color:purple">1</span>)]+b );
      }
      
      v[n*(n-<span class="constant" style="color:purple">1</span>)+i] = <span class="constant" style="color:purple">1.0</span>;
      <span style="color:blue">for</span> (j=n-<span class="constant" style="color:purple">2</span>; j&gt;=<span class="constant" style="color:purple">1</span>; j--) {
        v[j*n+i] = p[i*n+j] * v[(j+<span class="constant" style="color:purple">1</span>)*n+i] + q[i*n+j];
      }
    }

    <span style="color:darkgreen">//Row Sweep</span>
    <span style="color:blue">for</span> (i=<span class="constant" style="color:purple">1</span>; i&lt;n-<span class="constant" style="color:purple">1</span>; i++) {
      u[i*n] = <span class="constant" style="color:purple">1.0</span>;
      p[i*n] = <span class="constant" style="color:purple">0.0</span>;
      q[i*n] = u[i*n];
      <span style="color:blue">for</span> (j=<span class="constant" style="color:purple">1</span>; j&lt;n-<span class="constant" style="color:purple">1</span>; j++) {
        p[i*n+j] = -f / (d*p[i*n+(j-<span class="constant" style="color:purple">1</span>)]+e);
        q[i*n+j] = ( -a*v[(i-<span class="constant" style="color:purple">1</span>)*n+j]+(<span class="constant" style="color:purple">1.0</span>+<span class="constant" style="color:purple">2.0</span>*a)*v[i*n+j] 
                     -c*v[(i+<span class="constant" style="color:purple">1</span>)*n+j]
                     -d*q[i*n+(j-<span class="constant" style="color:purple">1</span>)])/(d*p[i*n+(j-<span class="constant" style="color:purple">1</span>)]+e );
      }
      u[i*n+(n-<span class="constant" style="color:purple">1</span>)] = <span class="constant" style="color:purple">1.0</span>;

      <span style="color:blue">for</span> (j=n-<span class="constant" style="color:purple">2</span>; j&gt;=<span class="constant" style="color:purple">1</span>; j--) {
            u[i*n+j] = p[i*n+j] * u[i*n+(j+<span class="constant" style="color:purple">1</span>)] + q[i*n+j];
      }
    }    </code></pre><h3 id="sec-initialization-routine" class="h2" data-heading-depth="2" style="display:block"><span class="heading-before"><span class="heading-label">2.2</span>.&#8194;</span>Initialization Routine</h3>
<pre class="para-block pre-fenced pre-fenced3 language-javascript lang-javascript javascript colorized" style="display:block"><code><span style="color:darkgreen">/*</span><span style="color:darkgreen"> Array initialization. </span><span style="color:darkgreen">*/</span>
<span style="color:blue">void</span> init_array (<span style="color:blue">int</span> n,<span style="color:blue">double</span> *u)
{
  <span style="color:blue">int</span> i, j;
  srand(<span class="constant" style="color:purple">0</span>);
  <span style="color:blue">for</span> (i = <span class="constant" style="color:purple">0</span>; i &lt; n; i++)
    <span style="color:blue">for</span> (j = <span class="constant" style="color:purple">0</span>; j &lt; n; j++)
      {
        u[i*n+j] =  (<span style="color:blue">double</span>) rand(); 
      }
}</code></pre><h2 id="sec-visualizations" class="h1" data-heading-depth="1" style="display:block"><span class="heading-before"><span class="heading-label">3</span>.&#8194;</span>Visualizations</h2>
<p class="p noindent">In order to demonstrate how PRESAGE maximizes the flow of errors affecting
SACs in the ADI kernel, we first visualize the time evolution computational 
data stored in 2d-grids during a fault-free execution using input parameters 
described below. Given that the ADI kernel performs time-stepped computations 
on four computational 2D-grids denoted by arrays u, v, p, and q, we visualize 
the computational data pertaining to these grids.
</p><h3 id="sec-experimental-details" class="h2" data-heading-depth="2" style="display:block"><span class="heading-before"><span class="heading-label">3.1</span>.&#8194;</span>Experimental Details</h3>
<p class="p noindent">Input parameters and setup details are provided below:
</p>
<pre class="para-block pre-fenced pre-fenced3 language-javascript lang-javascript javascript colorized" style="display:block"><code>Time-steps: <span class="constant" style="color:purple">50</span>
Grid size (<span style="color:blue">for</span> all <span class="constant" style="color:purple">2</span>d-grids u,v,p, and q): <span class="constant" style="color:purple">25</span>x25
Operating System: Ubuntu <span class="constant" style="color:purple">16.04</span>
CPU: Intel(R) Core(TM) i7-<span class="constant" style="color:purple">6700</span>HQ
LLVM version: <span class="constant" style="color:purple">3.9</span></code></pre><h3 id="sec-time-evolution-of-computational-data-in-2d-grids" class="h2" data-heading-depth="2" style="display:block"><span class="heading-before"><span class="heading-label">3.2</span>.&#8194;</span>Time Evolution of Computational Data in 2D-Grids</h3>
<p class="p noindent">Figure&nbsp;<a href="#fig-native" title="Time Evolution of Computational Data for Grids  u (top-left), v (top-right), p (bottom-left), and q." class="localref" style="target-element:figure"><span class="figure-label">1</span></a> shows the time evolution of the computational data stored
in 2d-grids u, v, p, and q during a fault-free execution using the input parameters 
described earlier.
</p>
<figure id="fig-native" class="figure floating align-center float" style="text-align:center;float-env:figure;float-name:Figure">
<p class="p noindent">  <img src="http://www.cs.utah.edu/~vinu/research/stencils/presage/presage_results/vizs/barc/native_u.gif" alt="native_u" data-path="http://www.cs.utah.edu/~vinu/research/stencils/presage/presage_results/vizs/barc/native_u.gif" data-linkid="native_u" style="width:400px;vertical-align:middle"> <img src="http://www.cs.utah.edu/~vinu/research/stencils/presage/presage_results/vizs/barc/native_v.gif" alt="native_v" data-path="http://www.cs.utah.edu/~vinu/research/stencils/presage/presage_results/vizs/barc/native_v.gif" data-linkid="native_v" style="width:400px;vertical-align:middle">
  <img src="http://www.cs.utah.edu/~vinu/research/stencils/presage/presage_results/vizs/barc/native_p.gif" alt="native_p" data-path="http://www.cs.utah.edu/~vinu/research/stencils/presage/presage_results/vizs/barc/native_p.gif" data-linkid="native_p" style="width:400px;vertical-align:middle"> <img src="http://www.cs.utah.edu/~vinu/research/stencils/presage/presage_results/vizs/barc/native_q.gif" alt="native_q" data-path="http://www.cs.utah.edu/~vinu/research/stencils/presage/presage_results/vizs/barc/native_q.gif" data-linkid="native_q" style="width:400px;vertical-align:middle">
</p>
<hr  class="figureline madoko" style="display:block">

<div class="p noindent"><fig-caption class="figure-caption"><span class="caption-before"><strong class="strong-star2">Figure&#160;<span class="figure-label">1</span>.</strong>&#160;</span><span class="caption-text">Time Evolution of Computational Data for Grids  u (top-left), v (top-right), p (bottom-left), and q.</span></fig-caption></div></figure><h3 id="sec-presage-in-action" class="h2" data-heading-depth="2" style="display:block"><span class="heading-before"><span class="heading-label">3.3</span>.&#8194;</span>PRESAGE in Action!</h3>
<p class="p noindent">Next, we perform two independent set of fault injection experiments on the native and the 
PRESAGE-transformed versions of the ADI kernel respectively using the same setup and input parameters 
described earlier. The first experiment-set comprises a fault-free and a faulty execution on the 
native version of the ADI kernel where as the second experiment-set consists of a fault-free and a 
faulty execution on the PRESAGE-transformed version of the ADI kernel. The fault injection profile 
chosen for both the experiment-sets targets the address of the element with coordinates (12,12) of 
the grid <strong class="strong-star2">q</strong> during 25th time-step for fault injection by flipping its 5th bit from LSB.
</p>
<p class="p indent">Figure&nbsp;<a href="#fig-psg" title="Time Evolution of Differential Computational Data for Grid q using Native (Left) and PRESAGE-transformed (Right) versions of the ADI Kernel." class="localref" style="target-element:figure"><span class="figure-label">2</span></a> plots the differential computational data obtained by subtracting the values stored in
the grid q during a fault-free execution from their corresponding values observed during the faulty execution
in both the experiment sets. The l.h.s. of Figure&nbsp;<a href="#fig-psg" title="Time Evolution of Differential Computational Data for Grid q using Native (Left) and PRESAGE-transformed (Right) versions of the ADI Kernel." class="localref" style="target-element:figure"><span class="figure-label">2</span></a> refers to the experiment-set pertaining
to the native version of ADI kernel where as the r.h.s. refers to the PRESAGE-transformed one. Clearly, 
due to PRESAGE enabling the flow of errors, we can observe a significantly higher number of elements
getting silently corrupted in the r.h.s as compared to the l.h.s. of Figure&nbsp;<a href="#fig-psg" title="Time Evolution of Differential Computational Data for Grid q using Native (Left) and PRESAGE-transformed (Right) versions of the ADI Kernel." class="localref" style="target-element:figure"><span class="figure-label">2</span></a>. 
</p>
<figure id="fig-psg" class="figure floating align-center float" style="text-align:center;float-env:figure;float-name:Figure">
<p class="p noindent"> <img src="http://www.cs.utah.edu/~vinu/research/stencils/presage/presage_results/vizs/barc/dnf.gif" alt="dnf" data-path="http://www.cs.utah.edu/~vinu/research/stencils/presage/presage_results/vizs/barc/dnf.gif" data-linkid="dnf" style="width:400px;vertical-align:middle"> <img src="http://www.cs.utah.edu/~vinu/research/stencils/presage/presage_results/vizs/barc/dnp.gif" alt="dnp" data-path="http://www.cs.utah.edu/~vinu/research/stencils/presage/presage_results/vizs/barc/dnp.gif" data-linkid="dnp" style="width:400px;vertical-align:middle">
</p>
<hr  class="figureline madoko" style="display:block">

<div class="p noindent"><fig-caption class="figure-caption"><span class="caption-before"><strong class="strong-star2">Figure&#160;<span class="figure-label">2</span>.</strong>&#160;</span><span class="caption-text">Time Evolution of Differential Computational Data for Grid q using Native (Left) and PRESAGE-transformed (Right) versions of the ADI Kernel.</span></fig-caption></div></figure><span data-line=""></span></div>
</body>

</html>
